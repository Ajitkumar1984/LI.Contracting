@model LI.Contracting.EntityDTO.ContractViewModel

@{
    ViewData["Title"] = "Index";
}

    <div class="container">
        <form asp-action="Index" method="post">
            <fieldset class="border p-2">
                <legend class="w-auto">Manage Contracts</legend>
                <div class="container">
                    <div class="form-group">
                        <label asp-for="FirstPartyId" class="control-label"></label>
                        <select asp-for="FirstPartyId" id="carrier_carrier" class="form-control" asp-items="@(new SelectList(Model.ListEntity, "Value", "Text"))">
                            <option>Please select one</option>
                        </select>
                        <span asp-validation-for="FirstPartyId" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="SecondPartyId" class="control-label"></label>
                        <select asp-for="SecondPartyId" id="carrier_mga"
                                class="form-control"
                                asp-items="@(new SelectList(Model.ListEntity, "Value", "Text"))">
                            <option>Please select one</option>
                        </select>
                        <span asp-validation-for="SecondPartyId" class="text-danger"></span>
                    </div>
                    <input type="submit" id="update" value="Save" class="btn btn-primary" />
                    <div asp-validation-summary="All" class="text-danger">

                    </div>
                </div>

            </fieldset>
        </form>
        <div class="container" id="contractgrid">

        </div>
    </div>

<script>

    function savecontract() {

        var model = {
            carrier: $("#carrier_carrier").val(),
            mga: $("#carrier_mga").val()
        };
        $.ajax({
            type: "POST",
            url: "/Contract/SaveContract",
            data: model,
            success: function (msg) {
                // loadGrid();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("some error occured while saving data");
            }
        });
        evt.preventDefault();
    }
    function savemgacontract() {
        $.ajax({
            type: "POST",
            url: "/Contract/SaveMGAContract",
            data: form.serialize(),
            success: function (msg) {
                // loadGrid();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("some error occured while saving data");
            }
        });
        evt.preventDefault();
    }
    function createcontract() {
        $("#pcarrier").load("/Contract/Carrier");
        $("#pmga").load("/Contract/MGA");
    }
    function editadvisor(id) {
        $("#pview").load("/Advisor/Edit/" + id);
        $("#editmode").show();
        $("#addmode").hide();
    }

    function deleteadvisor(id) {
        $.ajax({
            type: "POST",
            url: "/Advisor/Delete/" + id,
            success: function (msg) {
                createadvisor();
                loadGrid();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("some error occured while deleting data");
            }
        });

    }
    function loadGrid() {
        $("#contractgrid").load("/Contract/Grid")
    }

    $(document).ready(function () {
        loadGrid();
    });
</script>


